import { XdrWriter } from '../../src/serialization/xdr-writer';
import { XdrReader } from '../../src/serialization/xdr-reader';
let Int = XDR.Int;

describe('Int.read', function() {
  it('decodes correctly', function() {
    expect(read([0x00, 0x00, 0x00, 0x00])).to.eql(0);
    expect(read([0x00, 0x00, 0x00, 0x01])).to.eql(1);
    expect(read([0xff, 0xff, 0xff, 0xff])).to.eql(-1);
    expect(read([0x7f, 0xff, 0xff, 0xff])).to.eql(Math.pow(2, 31) - 1);
    expect(read([0x80, 0x00, 0x00, 0x00])).to.eql(-Math.pow(2, 31));
  });

  function read(bytes) {
    let io = new XdrReader(bytes);
    return Int.read(io);
  }
});

describe('Int.write', function() {
  it('encodes correctly', function() {
    expect(write(0)).to.eql([0x00, 0x00, 0x00, 0x00]);
    expect(write(1)).to.eql([0x00, 0x00, 0x00, 0x01]);
    expect(write(-1)).to.eql([0xff, 0xff, 0xff, 0xff]);
    expect(write(Math.pow(2, 31) - 1)).to.eql([0x7f, 0xff, 0xff, 0xff]);
    expect(write(-Math.pow(2, 31))).to.eql([0x80, 0x00, 0x00, 0x00]);
  });

  it('th